/*! ng-videosharing-embed - v0.2.3 - Embed videos using AngularJS directives - built 2014-09-25 - License MIT (http://www.opensource.org/licenses/MIT) */
angular.module("videosharing-embed",[]),angular.module("videosharing-embed").service("PlayerConfig",function(){"use strict";this.createInstance=function(a){var b=function(a){this.playerRegExp=a.playerRegExp,this.whitelist=a.whitelist,this.config={playerID:a.playerID,options:a.options},this.isPlayerFromURL=function(a){return null!=a.match(this.playerRegExp)}};return new b(a)}}),angular.module("videosharing-embed").factory("RegisteredPlayers",["PlayerConfig",function(a){"use strict";var b={youtube:{options:{autoplay:0,controls:1,loop:0},whitelist:["autoplay","controls","loop","playlist","rel","wmode"],playerID:"www.youtube.com/embed/",protocol:"http://",playerRegExp:/(http:|https:)?\/\/(?:www\.)?youtu(?:be\.com\/watch\?v=|\.be\/)([\-\w]*)(&(amp;)?[\w\?=]*)?/},youtubeNoCookie:{options:{autoplay:0,controls:1,loop:0},whitelist:["autoplay","controls","loop","playlist","rel","wmode"],playerID:"www.youtube-nocookie.com/embed/",protocol:"http://",playerRegExp:/(http:|https:)?\/\/(www\.youtube\-nocookie\.com)\/watch\?v=([A-Za-z0-9\-\_]+)/},vimeo:{options:{autoplay:0,loop:0},whitelist:["autoplay","color","loop"],playerID:"player.vimeo.com/video/",protocol:"http://",playerRegExp:/(http:|https:)?\/\/vimeo\.com\/([A-Za-z0-9]+)/},dailymotion:{options:{autoPlay:0,logo:0},whitelist:["autoPlay","logo","forceQuality"],playerID:"www.dailymotion.com/embed/video/",protocol:"http://",playerRegExp:/(http:|https:)?\/\/www\.dailymotion\.com\/video\/([A-Za-z0-9]+)/},youku:{options:{},whitelist:[],playerID:"player.youku.com/embed/",protocol:"http://",playerRegExp:/(http:)?\/\/v\.youku\.com\/v_show\/id_([A-Za-z0-9]+).html/}},c=[];return angular.forEach(b,function(b){c.push(a.createInstance(b))}),c}]),angular.module("videosharing-embed").filter("whitelist",function(){"use strict";return function(a,b){var c={};return angular.forEach(a,function(a,d){-1!=b.indexOf(d)&&(c[d]=a)}),c}}),angular.module("videosharing-embed").filter("videoOptions",function(){"use strict";return function(a){var b=[];return angular.forEach(a,function(a,c){b.push([c,a].join("="))}),b.length>0?"?"+b.join("&"):""}}),angular.module("videosharing-embed").directive("embedVideo",["$filter","RegisteredPlayers","$sce","$interval","$window",function(a,b,c,d,e){"use strict";return{restrict:"E",template:'<iframe width="{{width}}" height="{{height}}"  data-ng-src="{{trustedVideoSrc}}" allowfullscreen frameborder="0"></iframe>',scope:{height:"@",width:"@"},link:function(f,g,h){var i=g[0].children[0];i.attachEvent?i.attachEvent("onload",function(){f.i=d(function(){e.focus()},500)}):i.onload=function(){f.i=d(function(){e.focus()},500)},g.on("$destroy",function(){f.i&&(d.cancel(f.i),f.i=null)}),h.$observe("width",function(a){f.width=a}),h.$observe("height",function(a){f.height=a}),h.$observe("href",function(d){if(void 0!==d){var e=null;if(""===d||null==d)return void(f.trustedVideoSrc="");if(angular.forEach(b,function(a){a.isPlayerFromURL(d)&&(e=a)}),null!==e){var g=d.match(e.playerRegExp)[2],i=e.config,j=d.match(e.playerRegExp)[1]||"";angular.forEach(a("whitelist")(h,e.whitelist),function(a,b){i.options[b]=a});var k=j+"//"+i.playerID+g+a("videoOptions")(i.options);f.trustedVideoSrc=c.trustAsResourceUrl(k)}}})}}}]);